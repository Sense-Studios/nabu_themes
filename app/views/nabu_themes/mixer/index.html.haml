// -----------------------------------------------------------------------------

// Firebase
= javascript_include_tag "https://www.gstatic.com/firebasejs/3.6.2/firebase.js"
= javascript_include_tag "https://www.gstatic.com/firebasejs/3.6.1/firebase-app.js"
= javascript_include_tag "https://www.gstatic.com/firebasejs/3.6.1/firebase-auth.js"
= javascript_include_tag "https://www.gstatic.com/firebasejs/3.6.1/firebase-database.js"
= javascript_include_tag "https://www.gstatic.com/firebasejs/3.6.1/firebase-messaging.js"


:javascript
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDgrYfOUDN1QLRDcY4z45WwkcOjkXiImNQ",
    authDomain: "mixerbase-829c2.firebaseapp.com",
    databaseURL: "https://mixerbase-829c2.firebaseio.com",
    storageBucket: "mixerbase-829c2.appspot.com",
    messagingSenderId: "568387460963"
  };

  firebase.initializeApp(config);

  // test
  var bigOne = document.getElementById('bigOne');
  var dbRef = firebase.database().ref().child('text');
  dbRef.on('value', snap => bigOne.innerText = snap.val());

  // now do this
  // https://firebase.google.com/docs/database/web/read-and-write

// -----------------------------------------------------------------------------
%h1#bigOne

// Render Shaders
= render "../assets/javascripts/nabu_themes/_shared/mixer/shaders/blendmodes"

#vignet

%video#video1.hidden{:crossorigin=>"anonymous", :controls=>true, :autoplay=>true, :loop=>true}
%video#video2.hidden{:crossorigin=>"anonymous", :controls=>true, :autoplay=>true, :loop=>true}
%canvas#canvas
%canvas#glcanvas

:css
  .grey_back {
    background-color: #a5a5a5;
    color: #333333;
    font-weight: 600;

  }

  .white_back {
    background-color: #f5f5f5;
    color: #666666;
    font-weight: 100;
  }

  #glcanvas {
    position: absolute;
    z-index: -3;
    top: 0;
    left: 0;
    position: absolute;
    width: 100%;
    height: 100%;
  }


:javascript
  // set up renderer
  var options = {};

  var r = new GLRenderer(options)
  var b = new BPM()
  var c = new Control()
  var f = new Filemanager()

  r.addModule(b)
  r.addModule(c)
  r.addModule(f)
  r.start()

  // some more settings
  r.blendingMode = blendingModes.hardLight
